<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LinkedIn Contact Saver</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header__content">
        <h1 class="header__title">Contact Saver</h1>
        <div class="status-indicator" id="statusIndicator">
          <span class="status-dot"></span>
          <span class="status-text">Ready</span>
        </div>
      </div>
    </header>

    <!-- Configuration Section -->
    <section class="config-section">
      <button class="config-toggle" id="configToggle">
        <span class="config-toggle__text">Airtable Configuration</span>
        <span class="config-toggle__icon">▼</span>
      </button>
      
      <div class="config-content" id="configContent">
        <div class="field-group">
          <label for="apiToken" class="field-label">API Token</label>
          <input 
            type="password" 
            id="apiToken" 
            class="field-input" 
            placeholder="Enter your Airtable API token"
          >
          <div class="field-hint">
            Get your token from <a href="https://airtable.com/create/tokens" target="_blank">Airtable Tokens</a>
          </div>
        </div>
        
        <div class="field-group">
          <label for="baseId" class="field-label">Base ID</label>
          <input 
            type="text" 
            id="baseId" 
            class="field-input" 
            placeholder="app..."
          >
        </div>
        
        <div class="field-group">
          <label for="tableId" class="field-label">Table ID</label>
          <input 
            type="text" 
            id="tableId" 
            class="field-input" 
            placeholder="tbl..."
          >
        </div>
        
        <!-- Field Mappings Section -->
        <div class="field-mappings-section">
          <h3 class="field-mappings__title">Field Mappings</h3>
          <p class="field-mappings__description">
            Map LinkedIn data to your Airtable column names. Leave blank to use defaults.
          </p>
          
          <div class="mapping-grid">
            <div class="mapping-item">
              <label for="mapping-fullName" class="mapping-label">Full Name →</label>
              <input type="text" id="mapping-fullName" class="field-input mapping-input" placeholder="Name">
              <span class="field-type-badge" id="mapping-fullName-type"></span>
              <div class="mapping-error" id="mapping-fullName-error"></div>
            </div>
            
            <div class="mapping-item">
              <label for="mapping-jobTitle" class="mapping-label">Job Title →</label>
              <input type="text" id="mapping-jobTitle" class="field-input mapping-input" placeholder="Job Title">
              <span class="field-type-badge" id="mapping-jobTitle-type"></span>
              <div class="mapping-error" id="mapping-jobTitle-error"></div>
            </div>
            
            <div class="mapping-item">
              <label for="mapping-company" class="mapping-label">Company →</label>
              <input type="text" id="mapping-company" class="field-input mapping-input" placeholder="Company">
              <span class="field-type-badge" id="mapping-company-type"></span>
              <div class="mapping-error" id="mapping-company-error"></div>
            </div>
            
            <div class="mapping-item">
              <label for="mapping-location" class="mapping-label">Location →</label>
              <input type="text" id="mapping-location" class="field-input mapping-input" placeholder="Location">
              <span class="field-type-badge" id="mapping-location-type"></span>
              <div class="mapping-error" id="mapping-location-error"></div>
            </div>
            
            <div class="mapping-item">
              <label for="mapping-profileUrl" class="mapping-label">LinkedIn URL →</label>
              <input type="text" id="mapping-profileUrl" class="field-input mapping-input" placeholder="LinkedIn URL">
              <span class="field-type-badge" id="mapping-profileUrl-type"></span>
              <div class="mapping-error" id="mapping-profileUrl-error"></div>
            </div>

            <div class="mapping-item">
              <label for="mapping-profilePicture" class="mapping-label">Profile Picture →</label>
              <input type="text" id="mapping-profilePicture" class="field-input mapping-input" placeholder="Profile Picture">
              <span class="field-type-badge" id="mapping-profilePicture-type"></span>
              <div class="mapping-error" id="mapping-profilePicture-error"></div>
            </div>

            <div class="mapping-item">
              <label for="mapping-email" class="mapping-label">Email →</label>
              <input type="text" id="mapping-email" class="field-input mapping-input" placeholder="Email">
              <span class="field-type-badge" id="mapping-email-type"></span>
              <div class="mapping-error" id="mapping-email-error"></div>
            </div>
            
            <div class="mapping-item">
              <label for="mapping-phone" class="mapping-label">Phone →</label>
              <input type="text" id="mapping-phone" class="field-input mapping-input" placeholder="Phone">
              <span class="field-type-badge" id="mapping-phone-type"></span>
              <div class="mapping-error" id="mapping-phone-error"></div>
            </div>
            
            <div class="mapping-item">
              <label for="mapping-tags" class="mapping-label">Tags →</label>
              <input type="text" id="mapping-tags" class="field-input mapping-input" placeholder="Tags">
              <span class="field-type-badge" id="mapping-tags-type"></span>
              <div class="mapping-error" id="mapping-tags-error"></div>
            </div>
            
            <div class="mapping-item">
              <label for="mapping-notes" class="mapping-label">Notes →</label>
              <input type="text" id="mapping-notes" class="field-input mapping-input" placeholder="Notes">
              <span class="field-type-badge" id="mapping-notes-type"></span>
              <div class="mapping-error" id="mapping-notes-error"></div>
            </div>
          </div>
          
          <button type="button" class="btn btn--secondary" id="testMappings">
            Test Field Mappings
          </button>
        </div>
        
        <button class="btn btn--secondary" id="saveConfig">
          Save Configuration
        </button>
      </div>
    </section>

    <!-- Profile Picture Preview -->
    <div class="profile-picture-section">
      <div class="profile-picture-container">
        <div class="profile-picture-placeholder" id="profilePicturePlaceholder">
          <svg class="profile-picture-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span class="profile-picture-text">No profile picture</span>
        </div>
        <img class="profile-picture-img" id="profilePictureImg" alt="LinkedIn Profile Picture">
        <div class="profile-picture-loading" id="profilePictureLoading">
          <div class="spinner"></div>
        </div>
      </div>
      <div class="profile-picture-status" id="profilePictureStatus"></div>
    </div>

    <!-- Contact Form -->
    <form class="contact-form" id="contactForm">
      <div class="form-section">
        <h2 class="form-section__title">Profile Information</h2>
        
        <div class="field-group">
          <label for="fullName" class="field-label required">Full Name</label>
          <input 
            type="text" 
            id="fullName" 
            class="field-input" 
            required
          >
          <div class="field-error" id="fullNameError"></div>
        </div>
        
        <div class="field-group">
          <label for="jobTitle" class="field-label">Job Title</label>
          <input 
            type="text" 
            id="jobTitle" 
            class="field-input"
          >
        </div>
        
        <div class="field-group">
          <label for="company" class="field-label">Company</label>
          <input 
            type="text" 
            id="company" 
            class="field-input"
          >
        </div>
        
        <div class="field-group">
          <label for="location" class="field-label">Location</label>
          <input 
            type="text" 
            id="location" 
            class="field-input"
          >
        </div>
        
        <div class="field-group">
          <label for="profileUrl" class="field-label">LinkedIn URL</label>
          <input 
            type="url" 
            id="profileUrl" 
            class="field-input"
            readonly
          >
        </div>
      </div>

      <div class="form-section">
        <h2 class="form-section__title">Contact Details</h2>
        
        <div class="field-group">
          <label for="email" class="field-label">Email</label>
          <input 
            type="email" 
            id="email" 
            class="field-input"
          >
        </div>
        
        <div class="field-group">
          <label for="phone" class="field-label">Phone</label>
          <input 
            type="tel" 
            id="phone" 
            class="field-input"
          >
        </div>
        
        <div class="field-group">
          <label for="tags" class="field-label">Tags</label>
          <input 
            type="text" 
            id="tags" 
            class="field-input"
            placeholder="e.g., prospect, warm-lead, decision-maker"
          >
          <div class="field-hint">Separate tags with commas</div>
        </div>
        
        <div class="field-group">
          <label for="notes" class="field-label">Notes</label>
          <textarea 
            id="notes" 
            class="field-textarea"
            rows="4"
            placeholder="Add any additional notes about this contact..."
          ></textarea>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <button type="button" class="btn btn--secondary" id="clearForm">
          Clear Form
        </button>
        <button type="submit" class="btn btn--primary" id="saveContact">
          <span class="btn__text">Save Contact</span>
          <span class="btn__spinner" id="saveSpinner"></span>
        </button>
      </div>
    </form>

    <!-- Alert Messages -->
    <div class="alert" id="alertMessage"></div>
  </div>

  <script src="sidepanel.js"></script>
</body>
</html>